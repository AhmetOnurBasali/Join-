<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login</title>
    <link rel="icon" type="image/svg" href="/assets/img/join_logo.svg">
    <link rel="stylesheet" href="css/loginStyle.css">
    <link rel="stylesheet" href="../fonts.css">
    <script src="../js/login.js"></script>
    <script src="../js/mini_backend.js"></script>
    <script src="script.js"></script>

    <style>
        .slide-out-tl {
            animation: slide-out-tl 0.5s cubic-bezier(.68, -.55, .265, 1.55) both;
        }

        @keyframes slide-out-tl {
            0% {
                transform: translateY(0) translateX(0);
                opacity: 1
            }

            100% {
                transform: translateY(-250px) translateX(-250px);
                opacity: 0
            }
        }
    </style>
</head>

<body onload="loadUsers(), test()">
    <div class="logoEntrance">
        <img id="joinEntrance" src="assets/img/entranceLogo.svg">

        <div id="disclaimerConatiner">
            <div class="disclaimerEntrance">
                <p>
                    <b>Attention!</b><br>
                    Please do not use real credentials to log in to this site. This site was created
                    for educational and training purposes and the security of the data cannot be fully guaranteed. There
                    is
                    a
                    possibility that third parties can access this data. Please also note that all data stored on this
                    site
                    can
                    only be deleted manually by the administrators. For more information, please see our legal notice.
                </p>
                <div class="disclaimerBtnContainer">
                    <div>dont show me again !
                        <input type="checkbox" id="disclaimerCheck">
                    </div>
                    <button onclick="startJoinEntrance()" class="signUpBlueBtn">Join!</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loginLogoAndSignUp">
        <div class="logoLogin">
            <a href="index.html">
                <img class="logoSize" src="../assets/img/logo.svg">
            </a>
        </div>
        <div class="signButtonPosition">
            <span class="notUserTextPosi">
                <b>Not a Join user?</b>
            </span>
            <a href="html/signUp.html">
                <button class="loginBlueBtn">Sign up</button>
            </a>
        </div>
    </div>
    <div class="loginMainContainer">
        <div class="loginFormContainer">
            <form onsubmit="login(); return false" class="loginContainer">
                <b class="loginTextPosi">Log in</b>
                <div class="blueLineContainer">
                    <div class="blueLine"></div>
                </div>
                <input class="inputEmail" type="" id="email" placeholder="Email" required>
                <div class="relative">
                    <input onfocus="showEye()" onblur="showLock()" type="password" id="password" placeholder="Password"
                        required>
                    <input onclick="showPassword()" type="checkbox" class="showPassword">
                </div>
                <div id="msgBox"></div>
                <div id="msgBox2" class="warningPassword"></div>
                <div class="checkboxContainer">
                    <div class="checkbocPosi">
                        <input onclick="lsRememberMe()" type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember me</label>
                    </div>
                    <div>
                        <a href="html/forgotPassword.html">Forgot my password</a>
                    </div>
                </div>
                <div class="loginBtnContainer">
                    <button class="loginBlueBtn">
                        <b>Login</b>
                    </button>
                    <button class="loginWhiteBtn" onclick="loginAsGuest()">
                        <b>Guest Log in</b>
                    </button>
                    <!--Wird wahrscheinlich probleme geben wegen form-->
                </div>
            </form>
        </div>
    </div>

    <script>
        const rmCheck = document.getElementById("rememberMe"),
            emailInput = document.getElementById("email");
        passwordInput = document.getElementById("password");

        if (localStorage.checkbox && localStorage.checkbox && localStorage.checkbox !== "") {
            rmCheck.setAttribute("checked", "checked");
            emailInput.value = localStorage.email;
            passwordInput.value = localStorage.password;
        } else {
            rmCheck.removeAttribute("checked");
            emailInput.value = "";
            passwordInput.value = "";
        }


        const urlParams = new URLSearchParams(window.location.search)
        const msg = urlParams.get('msg')
        if (msg) {
            msgBox.innerHTML = msg;
        } else {
            document.getElementById('msgBox').classList.add('d-none')
        }


        const urlParams2 = new URLSearchParams(window.location.search)
        const msg2 = urlParams2.get('msg2')
        if (msg2) {
            msgBox2.innerHTML = msg2;
            passwordInput.value = ""
            passwordInput.placeholder = "Ups! Try again"
        } else {
            document.getElementById('msgBox2').classList.add('d-none')
        }

        if (localStorage.getItem('dontShowAgain') === 'true') {
            let text = document.getElementById('disclaimerConatiner');
            text.classList.add('d-none');
        }


    </script>

</body>

</html>